<div class="btn-toolbar">
  <button class="btn btn-primary" ng-click="showForm()" ng-hide="controller == 'PopupCtrl'">New quicktext</button>
  <!--
  <a href="" ng-click="deleteAll()">Delete all Quicktexts</a>
  -->
  <span class="pull-right search-table">
    <input type="text" class="form-control" id="search-input" ng-model="searchText" placeholder="Search quicktexts" />
  </span>
</div>
<div class="quicktext-filters pull-right">
  <span ng-repeat="(tag, count) in tags">
    <a
      href=''
      class="label"
      ng-class="{true: 'label-primary', false: 'label-default'}[filterTags.indexOf(tag) !== -1]"
      ng-click="toggleFilterTag()"
      >{{tag}}<span ng-if="count > 1"> ({{count}})</span></a>
    </span>
  </span>
</div>
<div class="clearfix"></div>
<div id="quicktext-table-container">
<table class="table table-hover" id="quicktext-table" ng-class="{'table-condensed': controller == 'PopupCtrl'}">
  <thead>
    <tr>
      <th>Title</th>
      <th ng-hide="controller == 'PopupCtrl'">Subject</th>
      <th>Tab Completion</th>
      <th>Tags</th>
      <th>Quicktext</th>
      <th ng-hide="controller == 'PopupCtrl'"></th>
    </tr>
  </thead>
  <tbody>
    <tr ng-repeat="quicktext in quicktexts | filter:searchText | tagFilter:filterTags "
        ng-class="{'active': $index === focusIndex}"
        ng-click="controller == 'PopupCtrl' ? insertQuicktext($index) : true">
      <td>{{quicktext.title}}</td>
      <td ng-hide="controller == 'PopupCtrl'">{{quicktext.subject}}</td>
      <td>{{quicktext.shortcut}}</td>
      <td>
        <span ng-repeat="tag in quicktext.tags.split(',')" class="label label-default">{{tag}}</span>
      </td>
      <td title="{{quicktext.body}}" ng-bind-html="quicktext.body | truncate:100 | newlines | safe"></td>
      <td ng-hide="controller == 'PopupCtrl'" class="btn-group">
        <button class="btn btn-primary btn-xs edit-button" ng-click="showForm()">edit</button>
        <button class="btn btn-default btn-xs delete-button" ng-click="deleteQt()">delete</button>
      </td>
    </tr>
  </tbody>
</table>
</div>
